<span data-ttu-id="9ba33-101">Załóżmy, że planujesz architekturę rozproszonej aplikacji do udostępniania muzyki.</span><span class="sxs-lookup"><span data-stu-id="9ba33-101">Suppose you are planning the architecture of a distributed music-sharing application.</span></span> <span data-ttu-id="9ba33-102">Chcesz mieć pewność, że aplikacja będzie tak niezawodna i skalowalna, jak to możliwe, i zamierzasz utworzyć niezawodną infrastrukturę komunikacji, korzystając z technologii platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="9ba33-102">You want to ensure that the application is as reliable and scalable as possible and you intend to use Azure technologies to build a robust communication infrastructure.</span></span>

<span data-ttu-id="9ba33-103">Zanim wybierzesz odpowiednią technologię platformy Azure, musisz poznać całą komunikację wymienianą przez składniki aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9ba33-103">Before you can choose the right Azure technology, you must understand each individual communication that the components of the application exchange.</span></span> <span data-ttu-id="9ba33-104">Dla każdego rodzaju komunikacji możesz wybrać inną technologię platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="9ba33-104">For each communication you can choose a different Azure technology.</span></span>

<span data-ttu-id="9ba33-105">Pierwszą rzeczą, którą należy ustalić, jest to, czy w ramach komunikacji są wysyłane komunikaty, czy zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="9ba33-105">The first thing to understand about a communication is whether it sends messages or events.</span></span> <span data-ttu-id="9ba33-106">Niektóre technologie platformy Azure są przeznaczone dla zdarzeń, a inne dla komunikatów, więc jest to fundamentalne rozróżnienie.</span><span class="sxs-lookup"><span data-stu-id="9ba33-106">Some Azure technologies target events and other target messages so this is a fundamental choice.</span></span>

## <a name="what-is-a-message"></a><span data-ttu-id="9ba33-107">Co to jest komunikat?</span><span class="sxs-lookup"><span data-stu-id="9ba33-107">What is a message?</span></span>

<span data-ttu-id="9ba33-108">W terminologii aplikacji rozproszonych **komunikaty** mają następujące cechy:</span><span class="sxs-lookup"><span data-stu-id="9ba33-108">In the terminology of distributed applications, **messages** have the following characteristics:</span></span>

- <span data-ttu-id="9ba33-109">Komunikat zawiera dane pierwotne wygenerowane przez jeden składnik, które zostaną wykorzystane przez inny składnik.</span><span class="sxs-lookup"><span data-stu-id="9ba33-109">A message contains raw data, produced by one component, that will be consumed by another component.</span></span>
- <span data-ttu-id="9ba33-110">Komunikat zawiera rzeczywiste dane, a nie tylko odwołanie do nich.</span><span class="sxs-lookup"><span data-stu-id="9ba33-110">A message contains the data itself, not just a reference to that data.</span></span>
- <span data-ttu-id="9ba33-111">Składnik wysyłający oczekuje, że zawartość komunikatu zostanie przetworzona przez składnik docelowy w określony sposób.</span><span class="sxs-lookup"><span data-stu-id="9ba33-111">The sending component expects the message content to be processed in a certain way by the destination component.</span></span> <span data-ttu-id="9ba33-112">Integralność całego systemu może zależeć od wykonania konkretnego zadania zarówno przez nadawcę, jak i odbiorcę.</span><span class="sxs-lookup"><span data-stu-id="9ba33-112">The integrity of the overall system may depend on both sender and receiver doing a specific job.</span></span>

<span data-ttu-id="9ba33-113">Na przykład załóżmy, że użytkownik przekazuje nowy utwór za pomocą mobilnej aplikacji do udostępniania muzyki.</span><span class="sxs-lookup"><span data-stu-id="9ba33-113">For example, suppose a user uploads a new song by using the mobile music-sharing app.</span></span> <span data-ttu-id="9ba33-114">Aplikacja mobilna musi wysłać ten utwór do internetowego interfejsu API, który działa na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="9ba33-114">The mobile app must send that song to the web API that runs in Azure.</span></span> <span data-ttu-id="9ba33-115">Musi zostać wysłany rzeczywisty plik multimedialny utworu, a nie jedynie alert wskazujący, że dodano nowy utwór.</span><span class="sxs-lookup"><span data-stu-id="9ba33-115">The song media file itself must be sent, not just an alert that indicates that a new song has been added.</span></span> <span data-ttu-id="9ba33-116">Aplikacja mobilna oczekuje, że internetowy interfejs API zapisze nowy utwór w bazie danych i udostępni go innym użytkownikom.</span><span class="sxs-lookup"><span data-stu-id="9ba33-116">The mobile app expects that the web API will store the new song in the database and make it available to other users.</span></span> <span data-ttu-id="9ba33-117">To jest przykład komunikatu.</span><span class="sxs-lookup"><span data-stu-id="9ba33-117">This is an example of a message.</span></span>

## <a name="what-is-an-event"></a><span data-ttu-id="9ba33-118">Co to jest zdarzenie?</span><span class="sxs-lookup"><span data-stu-id="9ba33-118">What is an event?</span></span>

<span data-ttu-id="9ba33-119">**Zdarzenia** są prostsze niż komunikaty i są najczęściej używane w przypadku emisji.</span><span class="sxs-lookup"><span data-stu-id="9ba33-119">**Events** are lighter-weight than messages and are most often used for broadcast communications.</span></span> <span data-ttu-id="9ba33-120">Składniki wysyłające zdarzenia są nazywane **wydawcami**, a odbierające — **subskrybentami**.</span><span class="sxs-lookup"><span data-stu-id="9ba33-120">The components sending the event are known as **publishers** and receivers are known as **subscribers**.</span></span>

<span data-ttu-id="9ba33-121">W przypadku zdarzeń składniki odbierające zazwyczaj określają, jaka komunikacja jest im potrzebna, i ją subskrybują.</span><span class="sxs-lookup"><span data-stu-id="9ba33-121">With events, receiving components will generally decide in which communications they are interested and "subscribe" to those.</span></span> <span data-ttu-id="9ba33-122">Subskrypcją zwykle zarządza pośrednik, np. usługa Azure Event Grid lub Azure Event Hub.</span><span class="sxs-lookup"><span data-stu-id="9ba33-122">The subscription is usually managed by an intermediary like Azure Event Grid or Azure Event Hub.</span></span> <span data-ttu-id="9ba33-123">Gdy wydawca wyśle zdarzenie, pośrednik skieruje je do odpowiednich subskrybentów.</span><span class="sxs-lookup"><span data-stu-id="9ba33-123">When publishers send an event, the intermediary will route that event to interested subscribers.</span></span> <span data-ttu-id="9ba33-124">Taki układ jest nazywany architekturą publikowania i subskrybowania. Nie jest to jedyny sposób obsługi zdarzeń, ale jest najbardziej powszechny.</span><span class="sxs-lookup"><span data-stu-id="9ba33-124">This is known as a "publish-subscribe architecture", it is not the only way to deal with events, but it is the most common.</span></span>

<span data-ttu-id="9ba33-125">Zdarzenia mają następujące cechy:</span><span class="sxs-lookup"><span data-stu-id="9ba33-125">Events have the following characteristics:</span></span>

- <span data-ttu-id="9ba33-126">Zdarzenie to uproszczone powiadomienie, które wskazuje, że coś się wydarzyło.</span><span class="sxs-lookup"><span data-stu-id="9ba33-126">An event is a lightweight notification that indicates that something happened.</span></span>
- <span data-ttu-id="9ba33-127">Zdarzenie może zostać wysłane do wielu odbiorców albo do żadnego.</span><span class="sxs-lookup"><span data-stu-id="9ba33-127">The event may be sent to multiple receivers or to none at all.</span></span>
- <span data-ttu-id="9ba33-128">Zdarzenia często mają się rozprzestrzeniać, czyli każdy wydawca ma mieć wielu subskrybentów.</span><span class="sxs-lookup"><span data-stu-id="9ba33-128">Events are often intended to "fan-out" or have a large number of subscribers for each publisher.</span></span>
- <span data-ttu-id="9ba33-129">Wydawca zdarzenia nie ma żadnych oczekiwań w stosunku do akcji podejmowanej przez składnik odbierający.</span><span class="sxs-lookup"><span data-stu-id="9ba33-129">The publisher of the event has no expectation about the action a receiving component takes.</span></span>
- <span data-ttu-id="9ba33-130">Niektóre zdarzenia to odrębne jednostki, które nie są powiązane z innymi zdarzeniami.</span><span class="sxs-lookup"><span data-stu-id="9ba33-130">Some events are discrete units and unrelated to other events.</span></span> 
- <span data-ttu-id="9ba33-131">Inne zdarzenia są częścią powiązanej i uporządkowanej serii.</span><span class="sxs-lookup"><span data-stu-id="9ba33-131">Some events are part of a related and ordered series.</span></span>  

<span data-ttu-id="9ba33-132">Załóżmy na przykład, że przekazywanie pliku z muzyką zostało zakończone i nowy utwór został dodany do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9ba33-132">For example, suppose the music file upload has been completed and the new song has been added to the database.</span></span> <span data-ttu-id="9ba33-133">Aby poinformować użytkowników o nowym pliku, internetowy interfejs API musi powiadomić o nim użytkowników frontonu internetowego i aplikacji mobilnej.</span><span class="sxs-lookup"><span data-stu-id="9ba33-133">In order to inform users of the new file, the web API must inform the web front-end and mobile app users of the new file.</span></span> <span data-ttu-id="9ba33-134">Użytkownicy mogą zdecydować, czy posłuchać nowego utworu, więc początkowe powiadomienie nie zawiera pliku z muzyką, a jedynie informuje użytkowników, że plik istnieje.</span><span class="sxs-lookup"><span data-stu-id="9ba33-134">The users can choose whether to listen to the new song, so the initial notification does not include the music file but only notifies users that the song exists.</span></span> <span data-ttu-id="9ba33-135">Nadawca nie oczekuje, że odbiorcy zdarzenia wykonają konkretną akcję po otrzymaniu zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="9ba33-135">The sender does not have a specific expectation that the event receivers will do anything particular in response the receiving this event.</span></span>

<span data-ttu-id="9ba33-136">To jest przykład odrębnego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="9ba33-136">This is an example of a discrete event.</span></span>

## <a name="how-to-choose-messages-or-events"></a><span data-ttu-id="9ba33-137">Jak wybrać komunikaty lub zdarzenia</span><span class="sxs-lookup"><span data-stu-id="9ba33-137">How to choose messages or events</span></span>

<span data-ttu-id="9ba33-138">Pojedyncza aplikacja prawdopodobnie będzie używać zdarzeń w niektórych przypadkach i komunikatów w innych.</span><span class="sxs-lookup"><span data-stu-id="9ba33-138">A single application is likely to use events for some purposes and messages for others.</span></span> <span data-ttu-id="9ba33-139">Przed dokonaniem wyboru musisz przeanalizować architekturę aplikacji oraz wszystkie przypadki jej użycia, aby zidentyfikować cele, w jakich składniki komunikują się ze sobą.</span><span class="sxs-lookup"><span data-stu-id="9ba33-139">Before you choose, you must analyze your application architecture and all its use cases to identify all the different purposes its components have to communicate with each other.</span></span> 

<span data-ttu-id="9ba33-140">Zdarzenia będą częściej używane w przypadku emisji i zwykle są efemeryczne. To oznacza, że komunikacja może nie zostać obsłużona przez żadnego odbiorcę, jeśli żaden jej nie subskrybuje.</span><span class="sxs-lookup"><span data-stu-id="9ba33-140">Events are more likely to be used for broadcasts and are often ephemeral, meaning a communication might not be handled by any receiver if none are currently subscribing.</span></span> <span data-ttu-id="9ba33-141">Komunikaty będą częściej używane w przypadku, gdy aplikacja rozproszona wymaga gwarancji przetworzenia komunikacji.</span><span class="sxs-lookup"><span data-stu-id="9ba33-141">Messages are more likely to be used where the distributed application requires a guarantee that the communication will be processed.</span></span>

<span data-ttu-id="9ba33-142">Dla każdego rodzaju komunikacji odpowiedz na pytanie: czy składnik wysyłający oczekuje przetworzenia komunikacji przez składnik docelowy w określony sposób?</span><span class="sxs-lookup"><span data-stu-id="9ba33-142">For each communication consider the question: Does the sending component expect the communication to be processed in a particular way by the destination component?</span></span>

<span data-ttu-id="9ba33-143">Jeśli tak, użyj komunikatu.</span><span class="sxs-lookup"><span data-stu-id="9ba33-143">If the answer is yes, choose to use a message.</span></span> <span data-ttu-id="9ba33-144">Jeśli nie, prawdopodobnie możesz użyć zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="9ba33-144">If the answer is no, you may be able to use events.</span></span>

## <a name="summary"></a><span data-ttu-id="9ba33-145">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="9ba33-145">Summary</span></span>

<span data-ttu-id="9ba33-146">Składniki aplikacji rozproszonej komunikują się ze sobą w wielu różnych celach.</span><span class="sxs-lookup"><span data-stu-id="9ba33-146">The components of a distributed application communicate with each other for many different purposes.</span></span> <span data-ttu-id="9ba33-147">Dla każdego z tych celów musisz wybrać, czy używać zdarzeń, czy komunikatów, aby zastosować technologię platformy Azure przeznaczoną do odpowiedniego celu.</span><span class="sxs-lookup"><span data-stu-id="9ba33-147">For each of these purposes, you must choose whether to use events or messages so that you can choose an Azure technology that is designed for that purpose.</span></span> 

<span data-ttu-id="9ba33-148">Po zrozumieniu, dlaczego składniki komunikują się ze sobą, oraz określeniu, czy używają zdarzeń, czy komunikatów, możesz wybrać kolejki usługi Azure Storage albo usługę Event Hubs, Event Grids lub Service Bus na potrzeby wymiany tych informacji.</span><span class="sxs-lookup"><span data-stu-id="9ba33-148">Having understood why your components communicate and whether they use events or messages, you can proceed to choose from Azure Storage queues, Event Hubs, Event Grids, or Service Bus to exchange the information.</span></span>