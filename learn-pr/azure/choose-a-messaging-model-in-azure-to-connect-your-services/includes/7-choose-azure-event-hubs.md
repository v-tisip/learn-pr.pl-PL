<span data-ttu-id="53cd7-101">Istnieją pewne aplikacje, które tworzą ogromną liczbę zdarzeń z niemal dowolnej liczby źródeł.</span><span class="sxs-lookup"><span data-stu-id="53cd7-101">There are certain applications that produce a massive number of events from almost as many sources.</span></span> <span data-ttu-id="53cd7-102">Często stosuje się termin „dane big data” do opisu tych sytuacji. Ponadto wymagają unikatowej infrastruktury do obsługi.</span><span class="sxs-lookup"><span data-stu-id="53cd7-102">We often hear the term "Big Data" applied to these situations and they require unique infrastructure to handle them.</span></span>

<span data-ttu-id="53cd7-103">Załóżmy, że pracujesz dla firmy Contoso Aircraft Engines.</span><span class="sxs-lookup"><span data-stu-id="53cd7-103">Imagine you work for Contoso Aircraft Engines.</span></span> <span data-ttu-id="53cd7-104">Silniki samolotowe wytwarzane przez Twojego pracodawcę mają setki czujników.</span><span class="sxs-lookup"><span data-stu-id="53cd7-104">The engines your employer manufactures have hundreds of sensors.</span></span> <span data-ttu-id="53cd7-105">Zanim samolot będzie mógł wzbijać się w powietrze każdego ranka, jego silniki są podłączane do uprzęży testowej i uruchamiane z różnymi prędkościami.</span><span class="sxs-lookup"><span data-stu-id="53cd7-105">Before an aircraft can be flown each morning, its engines are connected to a test harness and put through their paces.</span></span> <span data-ttu-id="53cd7-106">Ponadto dane zebrane podczas lotu są przesyłane strumieniowo po podłączeniu samolotu do urządzeń naziemnych.</span><span class="sxs-lookup"><span data-stu-id="53cd7-106">Additionally, cached in-flight data is streamed when the aircraft is connected to ground equipment.</span></span>

<span data-ttu-id="53cd7-107">Chcesz użyć historycznych danych z czujników, aby odkryć wzorce w odczytach, które wskazują na to, że prawdopodobnie wkrótce dojdzie do awarii silnika.</span><span class="sxs-lookup"><span data-stu-id="53cd7-107">You want to use historic sensor data to find patterns in the sensor readings that indicate engine failure is likely to happen soon.</span></span> <span data-ttu-id="53cd7-108">Chcesz porównać odczyty z czujników w czasie rzeczywistym z tymi wzorcami dotyczącymi awarii.</span><span class="sxs-lookup"><span data-stu-id="53cd7-108">You want the real-time sensor readings to be compared against these failure patterns.</span></span> <span data-ttu-id="53cd7-109">Następnie możesz ostrzegać użytkowników w czasie zbliżonym do rzeczywistego, jeżeli silnik zacznie wykazywać odczyty budzące obawy.</span><span class="sxs-lookup"><span data-stu-id="53cd7-109">You can then warn users in near real time if an engine is showing worrisome readings.</span></span>

## <a name="what-is-azure-event-hubs"></a><span data-ttu-id="53cd7-110">Co to jest usługa Azure Event Hubs?</span><span class="sxs-lookup"><span data-stu-id="53cd7-110">What is Azure Event Hubs</span></span>

<span data-ttu-id="53cd7-111">Usługa Azure Event Hub jest pośrednikiem dla wzorca komunikacji publikowania-subskrybowania, ale w przeciwieństwie do usługi Event Grid jest zoptymalizowana pod kątem ekstremalnie wysokiej przepływności, dużej liczby wydawców, zabezpieczeń oraz odporności.</span><span class="sxs-lookup"><span data-stu-id="53cd7-111">Azure Event Hub is an intermediary for the publish-subscribe communication pattern, but unlike Event Grid it is optimized for extremely high throughput, a large number of publishers, security, and resiliency.</span></span>

<span data-ttu-id="53cd7-112">Podczas gdy usługa Event Grid pasuje bardziej lub mniej doskonale do wzorca publikowania-subskrybowania, ponieważ po prostu zarządza subskrypcjami i kieruje komunikację do tych subskrybentów, usługa Event Hub wykonuje kilka dodatkowych funkcji, które w pewien sposób upodabniają ją bardziej do magistrali usług lub kolejki komunikatów zamiast prostego nadawcy zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="53cd7-112">Whereas Event Grid fits more or less perfectly into the publish-subscribe pattern in that it simply manages subscriptions and routes communications to those subscribers, Event Hub performs quite a few additional services that in some ways make it resemble a service bus or message queue more than a simple event broadcaster.</span></span>

#### <a name="partitions"></a><span data-ttu-id="53cd7-113">Partycje</span><span class="sxs-lookup"><span data-stu-id="53cd7-113">Partitions</span></span> ####
<span data-ttu-id="53cd7-114">Gdy usługa Event Hub odbiera komunikaty, dzieli je na partycje.</span><span class="sxs-lookup"><span data-stu-id="53cd7-114">As Event Hub receives communications it divides them into partitions.</span></span> <span data-ttu-id="53cd7-115">Partycje stanowią bufory, w których zapisuje się komunikację.</span><span class="sxs-lookup"><span data-stu-id="53cd7-115">Partitions are buffers into which the communications are saved.</span></span> <span data-ttu-id="53cd7-116">Ze względu na zastosowanie buforów zdarzeń zdarzenia nie są całkowicie tymczasowe — zdarzenie nie zostanie utracone tylko dlatego, że subskrybent był zajęty lub był w trybie offline.</span><span class="sxs-lookup"><span data-stu-id="53cd7-116">Because of the event buffers, events are not completely ephemeral and an event isn't missed just because a subscriber is busy or even offline.</span></span> <span data-ttu-id="53cd7-117">Subskrybent zawsze może użyć buforu, żeby „nadrobić zaległości”.</span><span class="sxs-lookup"><span data-stu-id="53cd7-117">The subscriber can always use the buffer to "catch up".</span></span> <span data-ttu-id="53cd7-118">Domyślnie zdarzenia pozostają w buforze przez 24 godziny i automatycznie wygasają po tym czasie.</span><span class="sxs-lookup"><span data-stu-id="53cd7-118">By default events stay in the buffer for 24 hours then automatically expire.</span></span>

<span data-ttu-id="53cd7-119">Bufory są zwane partycjami, ponieważ dane są dzielone między nimi.</span><span class="sxs-lookup"><span data-stu-id="53cd7-119">The buffers are called partitions because the data is divided amongst them.</span></span> <span data-ttu-id="53cd7-120">Każda usługa Event Hub ma co najmniej dwie partycje, a każda partycja ma oddzielny zestaw subskrybentów.</span><span class="sxs-lookup"><span data-stu-id="53cd7-120">Every Event Hub has at least two partitions, and each partition has a separate set of subscribers.</span></span>

#### <a name="capture"></a><span data-ttu-id="53cd7-121">Przechwytywanie</span><span class="sxs-lookup"><span data-stu-id="53cd7-121">Capture</span></span> ####
<span data-ttu-id="53cd7-122">Usługa Event Hub może wysyłać wszystkie zdarzenia natychmiast do usługi Azure Data Lake lub usługi Blob Storage, aby zapewnić niedrogą trwałość zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="53cd7-122">Event Hub can send all your events immediately to Azure Data Lake or Blob Storage for inexpensive permanent persistence.</span></span>

#### <a name="authentication"></a><span data-ttu-id="53cd7-123">Uwierzytelnianie</span><span class="sxs-lookup"><span data-stu-id="53cd7-123">Authentication</span></span> ####
<span data-ttu-id="53cd7-124">Wszyscy wydawcy są uwierzytelniani i wystawia się dla nich token.</span><span class="sxs-lookup"><span data-stu-id="53cd7-124">All publishers are authenticated and issued a token.</span></span> <span data-ttu-id="53cd7-125">Oznacza to, że usługa Event Hub może akceptować zdarzenia z urządzeń zewnętrznych oraz aplikacji mobilnych bez obaw o to, że fałszywe dane od złośliwych osób zrujnują analizę.</span><span class="sxs-lookup"><span data-stu-id="53cd7-125">This means Event Hub can accept events from external devices and mobile apps without worrying that fraudulent data from pranksters could ruin our analysis.</span></span> 

## <a name="using-azure-event-hub"></a><span data-ttu-id="53cd7-126">Używanie usługi Azure Event Hub</span><span class="sxs-lookup"><span data-stu-id="53cd7-126">Using Azure Event Hub</span></span>

<span data-ttu-id="53cd7-127">Usługa Event Hub obsługuje przetwarzanie potokowe strumieni zdarzeń do innych usług platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="53cd7-127">Event Hubs has support for pipelining event streams to other Azure services.</span></span> <span data-ttu-id="53cd7-128">Na przykład użycie jej wraz z usługą Stream Analytics umożliwia korzystanie ze złożonej analizy danych w czasie zbliżonym do rzeczywistego, z możliwością korelowania wielu zdarzeń oraz wyszukiwania wzorców.</span><span class="sxs-lookup"><span data-stu-id="53cd7-128">Using it with Stream Analytics for instance allows complex analysis of data in near real time with the ability to correlate multiple events and look for patterns.</span></span> <span data-ttu-id="53cd7-129">W tym przypadku usługa Stream Analytics będzie uznawana za subskrybenta.</span><span class="sxs-lookup"><span data-stu-id="53cd7-129">In this case, Stream Analytics would be considered a subscriber.</span></span>

<span data-ttu-id="53cd7-130">Dla naszych silników samolotowych skonfigurujemy architekturę, aby usługa Event Hubs uwierzytelniała komunikację z silnikami.</span><span class="sxs-lookup"><span data-stu-id="53cd7-130">For our aircraft engines, we'll set up our architecture so that Event Hubs will authenticate the communications from our engines.</span></span> <span data-ttu-id="53cd7-131">Następnie użyjemy opcji przechwytywania, aby zapisać wszystkie dane w usłudze Azure Data Lake. Później będziemy mogli użyć wszystkich tych danych do ponownego wytrenowania oraz poprawienia modeli uczenia maszynowego.</span><span class="sxs-lookup"><span data-stu-id="53cd7-131">We will then have it use Capture to save all the data to Azure Data Lake, later we can use all that data to retrain and improve our machine learning models.</span></span> <span data-ttu-id="53cd7-132">Na koniec nasze strumienie zdarzeń zostaną odebrane przez subskrybentów usługi Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="53cd7-132">Finally, our event streams will be picked up by Azure Stream Analytics subscribers.</span></span> <span data-ttu-id="53cd7-133">Usługa Stream Analytics użyje modelu uczenia maszynowego, aby wyszukać wzorce w danych z czujników, które mogą wskazywać problemy.</span><span class="sxs-lookup"><span data-stu-id="53cd7-133">Stream Analytics will use our machine learning model to look for patterns in the sensor data that might indicate problems.</span></span>

<span data-ttu-id="53cd7-134">Ponieważ mamy kilka partycji, a każdy silnik wysyła wszystkie dane tylko do jednej partycji na każde wystąpienie usługi Stream Analytics, subskrybent musi sobie poradzić tylko z podzbiorem wszystkich zebranych danych, zamiast filtrować i korelować ich całość.</span><span class="sxs-lookup"><span data-stu-id="53cd7-134">Because we have several partitions, and each engine sends all its data to only one partition each instance of our Stream Analytics subscriber only need deal with a subset of our overall data instead of filtering and correlating over all of it.</span></span>

## <a name="choose-event-grid-or-event-hub"></a><span data-ttu-id="53cd7-135">Wybieranie usługi Event Grid lub Event Hub</span><span class="sxs-lookup"><span data-stu-id="53cd7-135">Choose Event Grid or Event Hub</span></span>

<span data-ttu-id="53cd7-136">Obie usługi obsługują semantykę *Co najmniej raz*.</span><span class="sxs-lookup"><span data-stu-id="53cd7-136">Both support *At Least Once* semantics.</span></span>

<span data-ttu-id="53cd7-137">Jeśli potrzebujesz prostej infrastruktury publikowania-subskrybowania zdarzeń od zaufanych wydawców (np. od własnego serwera internetowego), wybierz usługę Azure Event Grid.</span><span class="sxs-lookup"><span data-stu-id="53cd7-137">If you need a simple event publish-subscribe infrastructure with trusted publishers (for instance your own web server), you should choose Azure Event Grid.</span></span>

### <a name="consider-event-hub-if"></a><span data-ttu-id="53cd7-138">Rozważ usługę Event Hub, jeśli:</span><span class="sxs-lookup"><span data-stu-id="53cd7-138">Consider Event Hub if</span></span>
* <span data-ttu-id="53cd7-139">potrzebujesz obsługi uwierzytelniania wielu wydawców;</span><span class="sxs-lookup"><span data-stu-id="53cd7-139">You need to support authenticating a large number of publishers</span></span>
* <span data-ttu-id="53cd7-140">chcesz zapisać strumień zdarzeń do usługi Azure Data Lake lub usługi Blob Storage;</span><span class="sxs-lookup"><span data-stu-id="53cd7-140">You need to save a stream of events to Azure Data Lake or Blob Storage</span></span>
* <span data-ttu-id="53cd7-141">chcesz agregować lub analizować strumień zdarzeń;</span><span class="sxs-lookup"><span data-stu-id="53cd7-141">You need aggregation or analytics on your event stream</span></span>
* <span data-ttu-id="53cd7-142">potrzebujesz niezawodnej obsługi komunikatów lub odporności.</span><span class="sxs-lookup"><span data-stu-id="53cd7-142">You need reliable messaging or resiliency</span></span> 