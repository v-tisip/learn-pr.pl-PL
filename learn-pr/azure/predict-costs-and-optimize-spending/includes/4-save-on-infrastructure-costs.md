<span data-ttu-id="99f90-101">Zapoznaliśmy się ze sposobem szacowania kosztów dla środowisk planowanych do utworzenia oraz posłużyliśmy się pewnymi narzędziami, aby uzyskać szczegółowe informacje o miejscach powstawania kosztów i przewidywanych przyszłych wydatkach.</span><span class="sxs-lookup"><span data-stu-id="99f90-101">We have seen how to create cost estimates for environments you'd like to build, walked through some tools to get details on where we're spending money, and projected future expenses.</span></span> <span data-ttu-id="99f90-102">Nasze następne wyzwanie to określenie, jak obniżyć koszty infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="99f90-102">Our next challenge is to look at how to reduce those infrastructure costs.</span></span>

## <a name="use-reserved-instances"></a><span data-ttu-id="99f90-103">Użycie wystąpień zarezerwowanych</span><span class="sxs-lookup"><span data-stu-id="99f90-103">Use reserved instances</span></span>

<span data-ttu-id="99f90-104">W przypadku z natury statycznych i przewidywalnych obciążeń maszyn wirtualnych, szczególnie występujących w sposób ciągły (24 godziny na dobę, 7 dni w tygodniu, 365 dni w roku), użycie wystąpień zarezerwowanych to doskonały sposób na oszczędności w wysokości do 70% (w zależności od rozmiaru maszyny wirtualnej).</span><span class="sxs-lookup"><span data-stu-id="99f90-104">If you have VM workloads that are static and predictable in nature, particularly ones that run 24x7x365, using reserved instances is a fantastic way to potentially save up to 70 percent, depending on the VM size.</span></span>

![Oszczędności dzięki wystąpieniom zarezerwowanym](../images/savings-coins.png)

<span data-ttu-id="99f90-106">Wystąpienia zarezerwowane można zakupić na okres 1 roku lub 3 lat, przy czym płatność jest wymagana za cały okres z góry.</span><span class="sxs-lookup"><span data-stu-id="99f90-106">Reserved instances are purchased in one-year or three-year terms, with payment required for the full term up front.</span></span> <span data-ttu-id="99f90-107">Po zakupie firma Microsoft dopasowuje rezerwację do uruchomionych wystąpień i zmniejsza liczbę godzin pozostałych dla rezerwacji.</span><span class="sxs-lookup"><span data-stu-id="99f90-107">After it's purchased, Microsoft matches up the reservation to running instances and decrements the hours from your reservation.</span></span> <span data-ttu-id="99f90-108">Rezerwacje można zakupić za pośrednictwem witryny Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="99f90-108">Reservations can be purchased through the Azure portal.</span></span> <span data-ttu-id="99f90-109">Ponieważ wystąpienia zarezerwowane stanowią rabat na zasoby obliczeniowe, są dostępne dla maszyn wirtualnych zarówno z systemem Windows, jak i Linux.</span><span class="sxs-lookup"><span data-stu-id="99f90-109">And because reserved instances are a compute discount, they are available for both Windows and Linux VMs.</span></span>

## <a name="right-size-underutilized-virtual-machines"></a><span data-ttu-id="99f90-110">Ustawianie prawidłowego rozmiaru dla nie w pełni wykorzystanych maszyn wirtualnych</span><span class="sxs-lookup"><span data-stu-id="99f90-110">Right-size underutilized virtual machines</span></span>

<span data-ttu-id="99f90-111">W ramach poprzedniego omówienia wspomniano, że usługi Azure Cost Management i Azure Advisor mogą zalecić ustawienie prawidłowego rozmiaru lub wyłączenie maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="99f90-111">Recall from our previous discussion that Azure Cost Management and Azure Advisor might recommend right-sizing or shutting down VMs.</span></span> <span data-ttu-id="99f90-112">Ustawianie prawidłowego rozmiaru maszyny wirtualnej to proces zmiany jej rozmiaru na odpowiedni.</span><span class="sxs-lookup"><span data-stu-id="99f90-112">Right-sizing a virtual machine is the process of resizing it to a proper size.</span></span> <span data-ttu-id="99f90-113">Wyobraźmy sobie serwer pracujący jako kontroler domeny i używający rozmiaru **Standard_D4sv3**. Przez ogromną większość czasu maszyna wirtualna jest w 90% bezczynna.</span><span class="sxs-lookup"><span data-stu-id="99f90-113">Let's imagine you have a server running as a domain controller that is sized as a **Standard_D4sv3**, but your VM is sitting at 90 percent idle the vast majority of the time.</span></span> <span data-ttu-id="99f90-114">Zmiana rozmiaru tej maszyny wirtualnej na **Standard_D2s_v3** zmniejsza koszt obliczeń o 50%.</span><span class="sxs-lookup"><span data-stu-id="99f90-114">By resizing this VM to a **Standard_D2s_v3**, you reduce your compute cost by 50 percent.</span></span> <span data-ttu-id="99f90-115">Koszty są liniowe i podwajają się dla każdego większego rozmiaru w ramach tej samej serii.</span><span class="sxs-lookup"><span data-stu-id="99f90-115">Costs are linear and double for each size larger in the same series.</span></span> <span data-ttu-id="99f90-116">W tym przypadku korzystna może być nawet zmiana serii wystąpień na mniej kosztowną serię maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="99f90-116">In this case, you might even benefit from changing the instance series to go to a less expensive VM series.</span></span>

![Zmiana rozmiaru maszyny wirtualnej](../images/vm-resize.png)

<span data-ttu-id="99f90-118">Zbyt duże maszyny wirtualne to typowe niepotrzebne wydatki na platformie Azure i to takie, które można łatwo zredukować.</span><span class="sxs-lookup"><span data-stu-id="99f90-118">Oversized virtual machines are a common unnecessary expense on Azure and one that is easily fixed.</span></span> <span data-ttu-id="99f90-119">Rozmiar maszyny wirtualnej możesz zmienić za pośrednictwem witryny Azure Portal, programu Azure PowerShell lub interfejsu wiersza polecenia platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="99f90-119">You can change the size of a VM through the Azure portal, Azure PowerShell, or the Azure CLI.</span></span>

> [!NOTE]
> <span data-ttu-id="99f90-120">Zmiana rozmiaru maszyny wirtualnej wymaga jej zatrzymania, zmiany rozmiaru, a następnie ponownego uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="99f90-120">Resizing a VM requires that it be stopped, resized, and then restarted.</span></span> <span data-ttu-id="99f90-121">Może to potrwać kilka minut w zależności do zakresu operacji zmiany rozmiaru.</span><span class="sxs-lookup"><span data-stu-id="99f90-121">This may take a few minutes depending on how significant the size change is.</span></span> <span data-ttu-id="99f90-122">Podczas wykonywania tego zadania należy zaplanować przestój lub przenieść ruch do innego wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="99f90-122">Plan for an outage, or shift your traffic to another instance while you perform this task.</span></span>

## <a name="deallocate-virtual-machines-in-off-hours"></a><span data-ttu-id="99f90-123">Cofanie przydziału maszyn wirtualnych poza godzinami pracy</span><span class="sxs-lookup"><span data-stu-id="99f90-123">Deallocate virtual machines in off hours</span></span>

<span data-ttu-id="99f90-124">Jeśli masz obciążenia maszyn wirtualnych, które są używane tylko w pewnych okresach, lecz działają nieustannie, marnujesz pieniądze.</span><span class="sxs-lookup"><span data-stu-id="99f90-124">If you have virtual machine workloads that are only used during certain periods of time, but you're running them every hour of every day, you're wasting money.</span></span> <span data-ttu-id="99f90-125">Te maszyny wirtualne to doskonali kandydaci do wyłączania w okresie bezczynności i ponownego uruchamiania zgodnie z harmonogramem, co pozwala zaoszczędzić na kosztach obliczeń, podczas gdy przydział maszyny wirtualnej jest cofnięty.</span><span class="sxs-lookup"><span data-stu-id="99f90-125">These VMs are great candidates to shut down when not in use and start back up on a schedule, saving you compute costs while the VM is deallocated.</span></span>

<span data-ttu-id="99f90-126">To podejście to doskonała strategia dla środowisk deweloperskich.</span><span class="sxs-lookup"><span data-stu-id="99f90-126">This approach is a great strategy for development environments.</span></span> <span data-ttu-id="99f90-127">Często programowanie odbywa się tylko podczas godzin pracy, dzięki czemu można elastycznie cofnąć przydział tych systemów poza godzinami pracy i zatrzymać naliczanie kosztów za operacje obliczeniowe.</span><span class="sxs-lookup"><span data-stu-id="99f90-127">It's often the case that development may happen only during business hours, giving you the flexibility to deallocate these systems in the off hours and stopping your compute costs from accruing.</span></span> <span data-ttu-id="99f90-128">Platforma Azure ma teraz w pełni dostępne [rozwiązanie do automatyzacji](https://docs.microsoft.com/azure/automation/automation-solution-vm-management), którego możesz użyć w swoim środowisku.</span><span class="sxs-lookup"><span data-stu-id="99f90-128">Azure now has an [automation solution](https://docs.microsoft.com/azure/automation/automation-solution-vm-management) fully available for you to leverage in your environment.</span></span>

<span data-ttu-id="99f90-129">Na maszynie wirtualnej jest także dostępna funkcja automatycznego zamykania, co pozwala na zaplanowanie zamykania.</span><span class="sxs-lookup"><span data-stu-id="99f90-129">You can also use the auto-shutdown feature on a virtual machine to schedule automated shutdowns.</span></span>

![Automatyczne zamykanie](../images/vm-auto-shutdown.png)

## <a name="delete-unused-virtual-machines"></a><span data-ttu-id="99f90-131">Usuwanie nieużywanych maszyn wirtualnych</span><span class="sxs-lookup"><span data-stu-id="99f90-131">Delete unused virtual machines</span></span> 

 <span data-ttu-id="99f90-132">Ta porada może wydawać się oczywista, ale jeśli nie używasz usługi, wyłącz ją.</span><span class="sxs-lookup"><span data-stu-id="99f90-132">This advice may sound obvious, but if you aren't using a service, you should shut it down.</span></span> <span data-ttu-id="99f90-133">Często można spotkać już niepotrzebne systemy nieprodukcyjne lub demonstracyjne pozostałe po projekcie.</span><span class="sxs-lookup"><span data-stu-id="99f90-133">It's not uncommon to find non-production or proof-of-concept systems left around following a project that is no longer needed.</span></span> <span data-ttu-id="99f90-134">Regularnie przeglądaj środowisko w celu zidentyfikowania tych systemów.</span><span class="sxs-lookup"><span data-stu-id="99f90-134">Regularly review your environment and work to identify these systems.</span></span> <span data-ttu-id="99f90-135">Ich zamknięcie może dać wiele korzyści nie tylko w postaci obniżenia kosztów infrastruktury, lecz także w postaci potencjalnych oszczędności na licencjach i kosztach utrzymania.</span><span class="sxs-lookup"><span data-stu-id="99f90-135">Shutting down these systems can have a multifaceted benefit by saving you not only on infrastructure costs but also potential savings on licensing and operations.</span></span>

## <a name="migrate-to-paas-or-saas-services"></a><span data-ttu-id="99f90-136">Migracja do usług PaaS lub SaaS</span><span class="sxs-lookup"><span data-stu-id="99f90-136">Migrate to PaaS or SaaS services</span></span> 

<span data-ttu-id="99f90-137">W miarę przenoszenia obciążeń do chmury naturalną koleją rzeczy jest rozpoczęcie od usług IaaS (infrastruktura jako usługa), a następnie odpowiednie przenoszenie ich do usług PaaS (platforma jako usługa) w ramach iteracyjnego procesu.</span><span class="sxs-lookup"><span data-stu-id="99f90-137">Lastly, as you move workloads to the cloud, a natural evolution is to start with infrastructure-as-a-service (IaaS) services and then move them to platform-as-a-service (PaaS) as appropriate, in an iterative process.</span></span>

<span data-ttu-id="99f90-138">Usługi PaaS zwykle dają znaczące oszczędności dotyczące zarówno zasobów, jak i kosztów operacyjnych.</span><span class="sxs-lookup"><span data-stu-id="99f90-138">PaaS services typically provide substantial savings in both resource and operational costs.</span></span> <span data-ttu-id="99f90-139">Wyzwanie polega na tym, że w zależności od typu usługi jej przeniesienie może wymagać różnych nakładów z punktu widzenia czasu i zasobów.</span><span class="sxs-lookup"><span data-stu-id="99f90-139">The challenge is that depending on the type of service, varying levels of effort will be required to move to these services from both a time and resource perspective.</span></span> <span data-ttu-id="99f90-140">Przeniesienie bazy danych programu SQL Server do usługi Azure SQL Database może być łatwe, lecz zmiana architektury wielowarstwowej aplikacji na architekturę kontenerową lub bezserwerową może być o wiele większym wysiłkiem.</span><span class="sxs-lookup"><span data-stu-id="99f90-140">You might be able to easily move a SQL Server database to Azure SQL Database, but it might take substantially more effort to move your multitier application to a container or serverless-based architecture.</span></span> <span data-ttu-id="99f90-141">Dobra praktyka to ciągła ocena architektury aplikacji pod kątem określenia, czy zastosowanie usług PaaS może przynieść korzyści.</span><span class="sxs-lookup"><span data-stu-id="99f90-141">It's a good practice to continuously evaluate the architecture of your applications to determine if there are efficiencies to be gained through PaaS services.</span></span>  

<span data-ttu-id="99f90-142">Platforma Azure ułatwia testowanie tych usług przy niewielkim ryzyku, umożliwiając stosunkowo łatwe wypróbowanie nowych wzorców architektury.</span><span class="sxs-lookup"><span data-stu-id="99f90-142">Azure makes it easy to test these services with little risk, giving you the ability to try out new architecture patterns relatively easily.</span></span> <span data-ttu-id="99f90-143">Jednak jest to zwykle dłuższe przedsięwzięcie i może nie stanowić natychmiastowej pomocy, jeśli szukasz szybkiego rozwiązania z punktu widzenia redukcji kosztów.</span><span class="sxs-lookup"><span data-stu-id="99f90-143">That said, it's typically a longer journey and might not be of immediate help if you're looking for quick wins from a cost-savings perspective.</span></span> <span data-ttu-id="99f90-144">Centrum architektury platformy Azure to doskonałe miejsce do znajdowania pomysłów na transformację Twojej aplikacji oraz poznawanie najlepszych rozwiązań dla szerokiej gamy architektur i usług platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="99f90-144">The Azure Architecture Center is a great place to get ideas for transforming your application, as well as best practices across a wide array of architectures and Azure services.</span></span> 