<span data-ttu-id="76597-101">Jako administrator sieci w firmie zajmującej się analizą danych ponosisz odpowiedzialność za nawiązywanie połączeń z maszynami wirtualnymi na platformie Azure i weryfikowanie poprawności ich konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="76597-101">As a network administrator at a data analysis company, you're responsible for connecting to virtual machines in Azure and checking that they're properly configured.</span></span> <span data-ttu-id="76597-102">Robisz to przy użyciu klienta protokołu Remote Desktop Protocol, łącząc się z interfejsem użytkownika pulpitu na maszynie wirtualnej z systemem Windows.</span><span class="sxs-lookup"><span data-stu-id="76597-102">You do that using a Remote Desktop Protocol client to connect to the VM's Windows desktop UI.</span></span>

## <a name="what-is-the-remote-desktop-protocol"></a><span data-ttu-id="76597-103">Co to jest protokół Remote Desktop Protocol?</span><span class="sxs-lookup"><span data-stu-id="76597-103">What is the Remote Desktop Protocol?</span></span>

<span data-ttu-id="76597-104">Protokół Remote Desktop Protocol (RDP) umożliwia zdalną łączność z interfejsem użytkownika komputerów z systemem Windows.</span><span class="sxs-lookup"><span data-stu-id="76597-104">Remote Desktop Protocol (RDP) provides remote connectivity to the UI of Windows-based computers.</span></span> <span data-ttu-id="76597-105">Protokół RDP pozwala na zalogowanie się do zdalnego fizycznego lub wirtualnego komputera z systemem Windows i kontrolowanie go tak, jak siedząc przy nim.</span><span class="sxs-lookup"><span data-stu-id="76597-105">RDP enables you to sign in to a remote physical or virtual Windows computer and control that computer as if you were seated at the console.</span></span>

> [!Note]
> <span data-ttu-id="76597-106">Funkcja Windows Hyper-V w systemach Windows Server 2016 i Windows 10 używa protokołu RDP do łączenia się z maszynami wirtualnymi uruchomionymi za pomocą funkcji hypervisor.</span><span class="sxs-lookup"><span data-stu-id="76597-106">Windows Hyper-V in Windows Server 2016 and Windows 10 uses RDP to connect to virtual machines running on the hypervisor.</span></span>

<span data-ttu-id="76597-107">Połączenie RDP umożliwia wykonywanie ogromnej większości operacji dostępnych z poziomu konsoli komputera fizycznego z wyjątkiem używania niektórych możliwości związanych z zasilaniem i sprzętem.</span><span class="sxs-lookup"><span data-stu-id="76597-107">An RDP connection enables you to carry out the vast majority of operations that you can do from the console of a physical computer, with the exception of some power and hardware-related functions.</span></span>

<span data-ttu-id="76597-108">Połączenie RDP wymaga klienta RDP.</span><span class="sxs-lookup"><span data-stu-id="76597-108">An RDP connection requires an RDP client.</span></span> <span data-ttu-id="76597-109">Firma Microsoft oferuje klientów RDP dla następujących systemów operacyjnych:</span><span class="sxs-lookup"><span data-stu-id="76597-109">Microsoft provides RDP clients for the following operating systems:</span></span>

* <span data-ttu-id="76597-110">Windows</span><span class="sxs-lookup"><span data-stu-id="76597-110">Windows</span></span>
* <span data-ttu-id="76597-111">iOS</span><span class="sxs-lookup"><span data-stu-id="76597-111">iOS</span></span>
* <span data-ttu-id="76597-112">MacOS</span><span class="sxs-lookup"><span data-stu-id="76597-112">MacOS</span></span>
* <span data-ttu-id="76597-113">Android</span><span class="sxs-lookup"><span data-stu-id="76597-113">Android</span></span>

<span data-ttu-id="76597-114">Istnieją również klienci systemu Linux typu open source, tacy jak Remmina, umożliwiający nawiązywanie połączenia z komputerem z systemem Windows z poziomu dystrybucji systemu Ubuntu.</span><span class="sxs-lookup"><span data-stu-id="76597-114">There are also open-source Linux clients, such as Remmina that enable you to connect to a Windows PC from an Ubuntu distribution.</span></span>

<span data-ttu-id="76597-115">System Windows 10 zawiera klienta RDP.</span><span class="sxs-lookup"><span data-stu-id="76597-115">Windows 10 includes an RDP client.</span></span>

![Klient RDP systemu Windows](../media-drafts/4-rdp-client.PNG)

## <a name="what-functionality-does-an-rdp-connection-support"></a><span data-ttu-id="76597-117">Jakie funkcje obsługuje połączenie za pomocą protokołu RDP?</span><span class="sxs-lookup"><span data-stu-id="76597-117">What functionality does an RDP connection support?</span></span>

<span data-ttu-id="76597-118">Za pomocą połączenia protokołu RDP możesz korzystać z interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="76597-118">With an RDP connection, you can interact with the UI.</span></span> <span data-ttu-id="76597-119">Jednak możesz również połączyć się z innymi usługami na komputerze zdalnym.</span><span class="sxs-lookup"><span data-stu-id="76597-119">However, you can also connect to other services on the remote computer.</span></span> <span data-ttu-id="76597-120">Usługi te obejmują:</span><span class="sxs-lookup"><span data-stu-id="76597-120">These services include:</span></span>

* <span data-ttu-id="76597-121">Połączenia drukarek, które umożliwiają komputerowi zdalnemu drukowanie na Twojej drukarce lokalnej.</span><span class="sxs-lookup"><span data-stu-id="76597-121">Printer connections that enable the remote computer to print to your local print device.</span></span>
* <span data-ttu-id="76597-122">Odtwarzanie dźwięku, przy czym dźwięk może być odtwarzany na komputerze lokalnym lub na urządzeniu zdalnym.</span><span class="sxs-lookup"><span data-stu-id="76597-122">Audio playback, where audio can play either on the local computer or on the remote device.</span></span>
* <span data-ttu-id="76597-123">Nagrywanie dźwięku, przy czym jest możliwe nagrywanie dźwięku z komputera lokalnego i przekierowanie go do urządzenia zdalnego.</span><span class="sxs-lookup"><span data-stu-id="76597-123">Audio recording, where you can record audio from the local computer and direct that sound to the remote device.</span></span>
* <span data-ttu-id="76597-124">Porty, które możesz przekierować do portów na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="76597-124">Ports, which you can redirect to the ports on the local computer.</span></span>
* <span data-ttu-id="76597-125">Dyski, w tym zamapowane dyski sieciowe, które są dostępne tak jak dyski podłączone do komputera zdalnego.</span><span class="sxs-lookup"><span data-stu-id="76597-125">Drives, including mapped network drives, where the drives will appear as connected to the remote computer.</span></span>
* <span data-ttu-id="76597-126">Urządzenia do przechwytywania wideo, takie jak zintegrowane kamery internetowe.</span><span class="sxs-lookup"><span data-stu-id="76597-126">Video capture devices, such as integrated web cams.</span></span>
* <span data-ttu-id="76597-127">Inne obsługiwane urządzenia typu plug and play.</span><span class="sxs-lookup"><span data-stu-id="76597-127">Other supported plug and play devices.</span></span>

<span data-ttu-id="76597-128">Nie wszystkie te funkcje są obsługiwane na platformie Azure, ponieważ dostępność zasobów fizycznych na tej platformie jest ograniczona.</span><span class="sxs-lookup"><span data-stu-id="76597-128">Not all of these features are supported in Azure, as there are restrictions on what physical assets are available on that platform.</span></span> <span data-ttu-id="76597-129">Na przykład tylko drukarki programowe można przekierować przez połączenie RDP z maszyny wirtualnej hostowanej na platformie Azure do urządzeń drukujących klienta nawiązującego połączenie.</span><span class="sxs-lookup"><span data-stu-id="76597-129">For example, only software printers can be redirected across an RDP connection from an Azure-hosted VM to the connecting client's print devices.</span></span>

## <a name="configure-network-settings-for-rdp-access-to-virtual-machines"></a><span data-ttu-id="76597-130">Konfigurowanie ustawień sieciowych pod kątem dostępu RDP do maszyn wirtualnych</span><span class="sxs-lookup"><span data-stu-id="76597-130">Configure network settings for RDP access to virtual machines</span></span>

<span data-ttu-id="76597-131">Połączenia z maszynami wirtualnymi platformy Azure można nawiązywać na trzy sposoby:</span><span class="sxs-lookup"><span data-stu-id="76597-131">Connections to Azure VMs can be made in three ways:</span></span>

1. <span data-ttu-id="76597-132">Bezpośrednio za pomocą publicznego adresu IP maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="76597-132">Directly to the public IP address of the VM.</span></span>
2. <span data-ttu-id="76597-133">Za pomocą połączenia wirtualnej sieci prywatnej (VPN, virtual private network).</span><span class="sxs-lookup"><span data-stu-id="76597-133">Through a virtual private network (VPN) connection.</span></span>
3. <span data-ttu-id="76597-134">Za pośrednictwem połączenia usługi ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="76597-134">Through an ExpressRoute connection.</span></span>

<span data-ttu-id="76597-135">Publiczny adres IP może być przydzielony na stałe lub dynamicznie.</span><span class="sxs-lookup"><span data-stu-id="76597-135">A public IP address can be either permanently allocated or dynamic.</span></span> <span data-ttu-id="76597-136">Należy również upewnić się, że dostęp do adresu publicznego maszyny wirtualnej jest możliwy na porcie 3389 (protokół RDP).</span><span class="sxs-lookup"><span data-stu-id="76597-136">You also need to ensure that you have access to the VM's public address on port 3389 (RDP).</span></span> <span data-ttu-id="76597-137">Ten warunek może wymagać wynegocjowania z zespołem zarządzającym zabezpieczeniami zapory Twojej organizacji udostępnienia portu 3389 dla publicznego adresu IP maszyny wirtualnej przez skonfigurowanie odpowiedniej reguły.</span><span class="sxs-lookup"><span data-stu-id="76597-137">This provision may require negotiation with the team that's managing your organization's firewall security, setting up a rule to your VM's public IP address on port 3389.</span></span>

<span data-ttu-id="76597-138">Dynamiczne publiczne adresy IP są przydzielane ponownie za każdym razem, gdy maszyna wirtualna zostanie uruchomiona ponownie.</span><span class="sxs-lookup"><span data-stu-id="76597-138">Dynamic public IP addresses are reallocated every time the VM restarts.</span></span> <span data-ttu-id="76597-139">Statyczne adresy są trwałe, lecz kosztują więcej.</span><span class="sxs-lookup"><span data-stu-id="76597-139">Static addresses are persistent, but cost more.</span></span>

<span data-ttu-id="76597-140">Aby połączenie za pośrednictwem sieci VPN było możliwe, sieć lokalna musi mieć aktywne połączenie VPN z platformą Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="76597-140">To connect through a VPN, your local network must have an active VPN connection to Microsoft Azure.</span></span>

<span data-ttu-id="76597-141">Podejście z użyciem połączenia usługi ExpressRoute umożliwia zarządzanie łącznością z maszyną wirtualną.</span><span class="sxs-lookup"><span data-stu-id="76597-141">The ExpressRoute link approach manages connectivity to the VM.</span></span> <span data-ttu-id="76597-142">Ta metoda zapewnia także najmniejsze opóźnienie i największą przepustowość połączenia.</span><span class="sxs-lookup"><span data-stu-id="76597-142">This approach also provides the lowest latency and highest bandwidth connection.</span></span>

> [!Note]
> <span data-ttu-id="76597-143">Niezależnie od opcji wybranej na potrzeby nawiązywania połączenia z platformą Azure należy upewnić się, że maszyna wirtualna jest dostępna za pośrednictwem protokołu RDP, zwykle na domyślnym porcie 3389.</span><span class="sxs-lookup"><span data-stu-id="76597-143">Regardless of which option you use to connect to Azure, you need to ensure the virtual machine is accessible over RDP, typically on the default port 3389.</span></span> <span data-ttu-id="76597-144">Maszynę wirtualną można skonfigurować tak, aby była dostępna tylko dla Twojego adresu IP klienta.</span><span class="sxs-lookup"><span data-stu-id="76597-144">You can configure the VM so it can be accessed only from your own client IP address.</span></span> <span data-ttu-id="76597-145">Łączenie z maszyną wirtualną za pośrednictwem portu 3389 i publicznego adresu IP jest zalecane tylko w środowiskach testowych.</span><span class="sxs-lookup"><span data-stu-id="76597-145">Connecting to a VM over port 3389 on a public IP address is only recommended for test environments.</span></span> <span data-ttu-id="76597-146">W środowiskach produkcyjnych należy użyć opcji 2 lub 3.</span><span class="sxs-lookup"><span data-stu-id="76597-146">In production environments, use option 2 or 3.</span></span>

## <a name="how-do-you-connect-to-a-vm-in-azure-using-rdp"></a><span data-ttu-id="76597-147">Jak można nawiązać połączenie z maszyną wirtualną na platformie Azure przy użyciu protokołu RDP?</span><span class="sxs-lookup"><span data-stu-id="76597-147">How do you connect to a VM in Azure using RDP?</span></span>

<span data-ttu-id="76597-148">Łączenie z maszyną wirtualną na platformie Azure przy użyciu protokołu RDP jest prostym procesem.</span><span class="sxs-lookup"><span data-stu-id="76597-148">Connecting to a VM in Azure using RDP is a simple process.</span></span> <span data-ttu-id="76597-149">W witrynie Azure Portal przejdź do właściwości maszyny wirtualnej i u góry strony kliknij pozycję **Połącz**.</span><span class="sxs-lookup"><span data-stu-id="76597-149">In the Azure portal, you go to the properties of your VM, and at the top, click **Connect**.</span></span> <span data-ttu-id="76597-150">Ta akcja spowoduje pobranie wstępnie skonfigurowanego pliku RDP, który system Windows otworzy w kliencie RDP.</span><span class="sxs-lookup"><span data-stu-id="76597-150">This action downloads a preconfigured .RDP file that Windows then opens in the RDP client.</span></span> <span data-ttu-id="76597-151">Plik RDP umożliwia skonfigurowanie łączenia za pośrednictwem publicznego adresu IP maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="76597-151">You can choose to connect over the public IP address of the VM in the RDP file.</span></span> <span data-ttu-id="76597-152">W przypadku łączenia przez sieć VPN lub za pomocą usługi ExpressRoute możesz wybrać wewnętrzny adres IP.</span><span class="sxs-lookup"><span data-stu-id="76597-152">Alternatively, if you're connecting over VPN or ExpressRoute, you can select the internal IP address.</span></span> <span data-ttu-id="76597-153">Wtedy możesz również wybrać numer portu dla połączenia.</span><span class="sxs-lookup"><span data-stu-id="76597-153">You can also select the port number for the connection.</span></span>

<span data-ttu-id="76597-154">Jeśli używasz statycznego publicznego adresu IP dla maszyny wirtualnej, możesz zapisać plik RDP na pulpicie.</span><span class="sxs-lookup"><span data-stu-id="76597-154">If you're using a static public IP address for the VM, you can save the .RDP file to your desktop.</span></span> <span data-ttu-id="76597-155">Jeśli używasz dynamicznego adresowania IP, plik RDP pozostaje ważny tylko tak długo, jak długo maszyna wirtualna jest uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="76597-155">If you're using dynamic IP addressing, the .RDP file only remains valid while the VM is running.</span></span> <span data-ttu-id="76597-156">Jeśli maszyna wirtualna zostanie zatrzymana i uruchomiona ponownie, należy pobrać kolejny plik RDP.</span><span class="sxs-lookup"><span data-stu-id="76597-156">If you stop and restart the VM, you must download another .RDP file.</span></span>

> [!Note]
> <span data-ttu-id="76597-157">Inna możliwość to wpisanie publicznego adresu IP maszyny wirtualnej w kliencie RDP systemu Windows i kliknięcie pozycji **Połącz**.</span><span class="sxs-lookup"><span data-stu-id="76597-157">You can also enter the public IP address of the VM into the Windows RDP client and click **Connect**.</span></span>

<span data-ttu-id="76597-158">Po nawiązaniu połączenia są zwykle wyświetlane dwa ostrzeżenia.</span><span class="sxs-lookup"><span data-stu-id="76597-158">When you connect, you will typically receive two warnings.</span></span> <span data-ttu-id="76597-159">Są to:</span><span class="sxs-lookup"><span data-stu-id="76597-159">These are:</span></span>

* <span data-ttu-id="76597-160">Ostrzeżenie o wydawcy — spowodowane tym, że plik RDP nie jest podpisany za pomocą klucza publicznego.</span><span class="sxs-lookup"><span data-stu-id="76597-160">Publisher warning - caused by the .RDP file not being publicly signed.</span></span>
* <span data-ttu-id="76597-161">Ostrzeżenie o certyfikacie — spowodowane tym, że certyfikat maszyny nie jest zaufany.</span><span class="sxs-lookup"><span data-stu-id="76597-161">Certificate warning - caused by the machine certificate not being trusted.</span></span>

<span data-ttu-id="76597-162">W środowiskach testowych można zignorować te ostrzeżenia.</span><span class="sxs-lookup"><span data-stu-id="76597-162">In test environments, these warnings can be ignored.</span></span> <span data-ttu-id="76597-163">W środowiskach produkcyjnych plik RDP można podpisać przy użyciu programu RDPSIGN.EXE, a certyfikat maszyny umieścić w magazynie **zaufanych głównych urzędów certyfikacji** klienta.</span><span class="sxs-lookup"><span data-stu-id="76597-163">In production environments, the .RDP file could be signed using RDPSIGN.EXE and the machine certificate placed in the client's **Trusted Root Certification Authorities** store.</span></span>

## <a name="summary"></a><span data-ttu-id="76597-164">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="76597-164">Summary</span></span>

<span data-ttu-id="76597-165">Teraz możesz nawiązać połączenie z maszyną wirtualną z systemem Windows przy użyciu protokołu RDP.</span><span class="sxs-lookup"><span data-stu-id="76597-165">Now you can connect to a Windows VM by using RDP.</span></span> <span data-ttu-id="76597-166">W poniższym ćwiczeniu użyjesz protokołu RDP do połączenia się z maszyną wirtualną, a następnie zainstalujesz rolę serwera na komputerze.</span><span class="sxs-lookup"><span data-stu-id="76597-166">In the following exercise, you will use RDP to connect to a VM, then install a server role on that computer.</span></span>
